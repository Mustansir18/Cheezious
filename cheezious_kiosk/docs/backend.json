{
  "entities": {
    "Branch": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Branch",
      "type": "object",
      "description": "Represents a Cheezious branch location.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the branch."
        },
        "name": {
          "type": "string",
          "description": "Name of the branch (e.g., 'Downtown')."
        },
        "address": {
          "type": "string",
          "description": "Street address of the branch."
        },
        "latitude": {
          "type": "number",
          "description": "Latitude coordinate of the branch location."
        },
        "longitude": {
          "type": "number",
          "description": "Longitude coordinate of the branch location."
        }
      },
      "required": [
        "id",
        "name",
        "address",
        "latitude",
        "longitude"
      ]
    },
    "MenuCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MenuCategory",
      "type": "object",
      "description": "Represents a category of menu items.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the menu category."
        },
        "name": {
          "type": "string",
          "description": "Name of the menu category (e.g., 'Burgers', 'Sides')."
        },
        "description": {
          "type": "string",
          "description": "Description of the menu category."
        }
      },
      "required": [
        "id",
        "name",
        "description"
      ]
    },
    "MenuItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MenuItem",
      "type": "object",
      "description": "Represents a single item on the menu.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the menu item."
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to MenuCategory. (Relationship: MenuCategory 1:N MenuItem)"
        },
        "name": {
          "type": "string",
          "description": "Name of the menu item (e.g., 'Cheezious Burger')."
        },
        "description": {
          "type": "string",
          "description": "Description of the menu item."
        },
        "price": {
          "type": "number",
          "description": "Price of the menu item."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the image for the menu item.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "categoryId",
        "name",
        "description",
        "price",
        "imageUrl"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents a customer order.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order."
        },
        "branchId": {
          "type": "string",
          "description": "Reference to Branch. (Relationship: Branch 1:N Order)"
        },
        "orderDate": {
          "type": "string",
          "description": "Date and time the order was placed.",
          "format": "date-time"
        },
        "orderType": {
          "type": "string",
          "description": "Type of order (Dine-In or Take Away)."
        },
        "status": {
          "type": "string",
          "description": "Status of the order (e.g., 'Pending', 'Preparing', 'Ready', 'Completed')."
        },
        "totalAmount": {
          "type": "number",
          "description": "Total amount of the order."
        }
      },
      "required": [
        "id",
        "branchId",
        "orderDate",
        "orderType",
        "status",
        "totalAmount"
      ]
    },
    "OrderItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OrderItem",
      "type": "object",
      "description": "Represents a single item within an order.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order item."
        },
        "orderId": {
          "type": "string",
          "description": "Reference to Order. (Relationship: Order 1:N OrderItem)"
        },
        "menuItemId": {
          "type": "string",
          "description": "Reference to MenuItem. (Relationship: MenuItem 1:N OrderItem)"
        },
        "quantity": {
          "type": "number",
          "description": "Quantity of the menu item in the order."
        },
        "itemPrice": {
          "type": "number",
          "description": "The price of this item."
        }
      },
      "required": [
        "id",
        "orderId",
        "menuItemId",
        "quantity",
        "itemPrice"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/branches/{branchId}",
        "definition": {
          "entityName": "Branch",
          "schema": {
            "$ref": "#/backend/entities/Branch"
          },
          "description": "Stores information about Cheezious branches.",
          "params": [
            {
              "name": "branchId",
              "description": "Unique identifier for the branch."
            }
          ]
        }
      },
      {
        "path": "/menu_categories/{categoryId}",
        "definition": {
          "entityName": "MenuCategory",
          "schema": {
            "$ref": "#/backend/entities/MenuCategory"
          },
          "description": "Stores categories of menu items.",
          "params": [
            {
              "name": "categoryId",
              "description": "Unique identifier for the menu category."
            }
          ]
        }
      },
      {
        "path": "/menu_items/{menuItemId}",
        "definition": {
          "entityName": "MenuItem",
          "schema": {
            "$ref": "#/backend/entities/MenuItem"
          },
          "description": "Stores individual menu items.",
          "params": [
            {
              "name": "menuItemId",
              "description": "Unique identifier for the menu item."
            }
          ]
        }
      },
      {
        "path": "/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/backend/entities/Order"
          },
          "description": "Stores customer order data.",
          "params": [
            {
              "name": "orderId",
              "description": "Unique identifier for the order."
            }
          ]
        }
      },
      {
        "path": "/orders/{orderId}/order_items/{orderItemId}",
        "definition": {
          "entityName": "OrderItem",
          "schema": {
            "$ref": "#/backend/entities/OrderItem"
          },
          "description": "Stores individual items within an order.",
          "params": [
            {
              "name": "orderId",
              "description": "Unique identifier for the order."
            },
            {
              "name": "orderItemId",
              "description": "Unique identifier for the order item."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore structure prioritizes authorization independence and efficient data retrieval for the Cheezious Connect application. It focuses on supporting the QR code scanning, order placement, and cashier management workflows.  Key design decisions include:\n\n*   **Authorization Independence:** Since all user access is anonymous, no authorization independence considerations are needed, because all users have the same permission. The application relies on simple security rules based on path-based access.\n\n*   **Structural Segregation:** Data with different access requirements are stored in separate collections (e.g., menu items, branches, and orders).\n\n*   **QR Code and Branch Association:** The `branches` collection stores branch information.  Orders are placed at a specific branch, identified by `branchId`.\n\n*   **Order Management:** The `orders` collection stores order data, with each order containing references to order items.  The `status` field in the `orders` collection facilitates order tracking (pending, preparing, ready, completed).\n\n*   **Menu Structure:** `menu_categories` and `menu_items` collections store menu information, enabling efficient retrieval of menu data for the customer.\n\nThis structure enables secure `list` operations for menu items and branches and supports the required application features, including QR code scanning, order placement, cashier management, and order-ready notifications."
  }
}
